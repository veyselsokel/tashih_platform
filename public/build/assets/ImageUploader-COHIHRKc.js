import{r as k,o as I,d as u,b as l,k as G,F as U,e as F,a as p,m as v,x as _}from"./app-A8zMFDdo.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const y=1920,h=1080,w=.7,b=2*1024*1024,x=c=>new Promise((m,n)=>{const s=new FileReader;s.readAsDataURL(c),s.onload=g=>{const i=new Image;i.src=g.target.result,i.onload=()=>{let d=i.width,t=i.height;d>y&&(t*=y/d,d=y),t>h&&(d*=h/t,t=h);const e=document.createElement("canvas");e.width=d,e.height=t,e.getContext("2d").drawImage(i,0,0,d,t),e.toBlob(r=>{if(r)if(r.size>b){const o=b/r.size*w;e.toBlob(f=>m(f),"image/jpeg",Math.min(o,w))}else m(r);else n(new Error("Görsel sıkıştırılamadı"))},"image/jpeg",w)},i.onerror=()=>n(new Error("Görsel yüklenemedi"))},s.onerror=()=>n(new Error("Dosya okunamadı"))}),A={class:"space-y-6"},B={class:"space-y-2"},E=["src"],C={class:"mt-4"},D={class:"mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},L=["src","alt"],R={class:"mt-2 space-y-2"},T=["onUpdate:modelValue"],V=["onUpdate:modelValue"],j=["onClick"],z={__name:"ImageUploader",props:{featuredImage:{type:[File,null],default:null},gallery:{type:Array,default:()=>[]},preview:{type:String,default:null},initialGallery:{type:Array,default:()=>[]}},emits:["update:featuredImage","update:gallery"],setup(c,{emit:m}){const n=m,s=k([]),g=async t=>{const e=t.target.files[0];if(e)try{const a=await x(e),r=new File([a],e.name,{type:"image/jpeg",lastModified:new Date().getTime()});n("update:featuredImage",r)}catch(a){console.error("Resim sıkıştırma hatası:",a)}},i=async t=>{const e=Array.from(t.target.files);for(const a of e)try{const r=await x(a),o=new File([r],a.name,{type:"image/jpeg",lastModified:Date.now()}),f=URL.createObjectURL(o);s.value.push({file:o,preview:f,caption:"",altText:""}),n("update:gallery",s.value)}catch(r){console.error("Görsel işleme hatası:",r)}},d=t=>{s.value.splice(t,1),n("update:gallery",s.value)};return I(()=>{var t;(t=props.initialGallery)!=null&&t.length&&(s.value=props.initialGallery,n("update:gallery",s.value))}),(t,e)=>(p(),u("div",A,[l("div",null,[e[0]||(e[0]=l("label",{class:"mb-2 block text-sm font-medium text-gray-700"}," Öne Çıkan Görsel ",-1)),l("div",B,[l("input",{type:"file",onChange:g,accept:"image/*",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"},null,32),c.preview?(p(),u("img",{key:0,src:c.preview,alt:"Öne çıkan görsel önizleme",class:"h-32 w-32 rounded-lg object-cover"},null,8,E)):G("",!0)])]),l("div",C,[e[2]||(e[2]=l("label",{class:"mb-2 block text-sm font-medium text-gray-700"}," Galeri Görselleri ",-1)),l("input",{type:"file",onChange:i,accept:"image/*",multiple:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"},null,32),l("div",D,[(p(!0),u(U,null,F(s.value,(a,r)=>(p(),u("div",{key:a.id||r,class:"relative rounded-lg border p-2"},[l("img",{src:a.preview||a.image_url,alt:a.alt_text,class:"h-32 w-full rounded-lg object-cover"},null,8,L),l("div",R,[v(l("input",{"onUpdate:modelValue":o=>a.caption=o,type:"text",placeholder:"Resim başlığı",class:"w-full text-sm rounded-md border-gray-300"},null,8,T),[[_,a.caption]]),v(l("input",{"onUpdate:modelValue":o=>a.alt_text=o,type:"text",placeholder:"Alt metin",class:"w-full text-sm rounded-md border-gray-300"},null,8,V),[[_,a.alt_text]])]),l("button",{onClick:o=>d(r),class:"absolute -top-2 -right-2 rounded-full bg-red-500 p-1 text-white hover:bg-red-600"},e[1]||(e[1]=[l("span",{class:"sr-only"},"Görseli kaldır",-1)]),8,j)]))),128))])]),e[3]||(e[3]=l("p",{class:"text-sm text-gray-500"}," * Görseller otomatik olarak optimize edilecektir. Maksimum dosya boyutu: 2MB ",-1))]))}},N=M(z,[["__scopeId","data-v-cf3bf79b"]]);export{N as default};
