import{r as T,l as se,o as ae,A as ne,z as re,d as p,b as v,t as S,u as n,n as Q,k as F,F as X,e as I,a as g,f as ie,m as ue,x as ce,j as fe}from"./app-A8zMFDdo.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";function ve(w){const i=T([]),C=T(null),U=T({}),m=T("across"),u=T(null),h=T(""),b=T(""),W=T(44),O=T(!0),Y=se(()=>{var e;return((e=w.puzzleData)==null?void 0:e.title)||"Kare Bulmaca"}),N=se(()=>{var e;return(((e=w.puzzleData)==null?void 0:e.clues)||[]).filter(t=>t.direction==="across").sort((t,s)=>t.number-s.number||t.row-s.row||t.col-s.col)}),G=se(()=>{var e;return(((e=w.puzzleData)==null?void 0:e.clues)||[]).filter(t=>t.direction==="down").sort((t,s)=>t.number-s.number||t.col-s.col||t.row-s.row)}),H=()=>{if(O.value=!0,h.value="",b.value="",!w.puzzleData||typeof w.puzzleData.width!="number"||w.puzzleData.width<=0||typeof w.puzzleData.height!="number"||w.puzzleData.height<=0||!Array.isArray(w.puzzleData.clues)){console.error("Invalid or incomplete puzzle data for initialization:",w.puzzleData),i.value=[],h.value="Geçersiz bulmaca verisi. Lütfen bulmaca yapısını kontrol edin.",b.value="error",O.value=!1;return}const{width:e,height:t,clues:s}=w.puzzleData,o=Array.from({length:t},(r,f)=>Array.from({length:e},(d,E)=>({value:"",isActive:!1,number:null,row:f,col:E,isError:!1,clueRefs:[]})));let a=0,l=0;if(s.forEach(r=>{if(typeof r.row!="number"||typeof r.col!="number"||typeof r.length!="number"||r.length<=0||!r.solution||typeof r.solution!="string"||r.solution.length!==r.length||typeof r.number!="number"||r.direction!=="across"&&r.direction!=="down"){console.warn("Skipping invalid clue format (e.g., length/solution mismatch, missing fields):",r),a++;return}let f=r.row,d=r.col;if(f<0||f>=t||d<0||d>=e){console.warn(`Clue ${r.number} (${r.direction}) starting position (${f},${d}) is out of bounds (${e}x${t}). Skipping.`),l++;return}o[f][d].number===null?o[f][d].number=r.number:o[f][d].number=Math.min(o[f][d].number,r.number);let E=!1;for(let K=0;K<r.length;K++){const y=r.direction==="down"?f+K:f,D=r.direction==="across"?d+K:d;if(y<0||y>=t||D<0||D>=e){console.warn(`Clue ${r.number} (${r.direction}) extends out of bounds at (${y},${D}). Truncating or skipping.`),E=!0;break}o[y][D].isActive=!0,o[y][D].clueRefs.some(j=>j.number===r.number&&j.direction===r.direction)||o[y][D].clueRefs.push({number:r.number,direction:r.direction,clueObj:r})}E&&l++}),i.value=o,a>0||l>0){let r=[];a>0&&r.push(`${a} ipucu geçersiz formatta`),l>0&&r.push(`${l} ipucu sınırlar dışında`),h.value=`Bulmaca yüklenirken sorunlar oluştu: ${r.join(", ")}. Lütfen bulmaca verisini kontrol edin.`,b.value="error"}else i.value.flat().some(r=>r.isActive)||(h.value="Bulmaca verisi yüklendi ancak aktif hücre bulunamadı. İpuçlarını kontrol edin.",b.value="error");C.value=null,u.value=null,m.value="across",O.value=!1,P()},P=async()=>{var o,a,l,r;if(await re(),!i.value.length||O.value)return;const e=N.value[0];if(e&&((a=(o=i.value[e.row])==null?void 0:o[e.col])!=null&&a.isActive)){z(e);return}const t=G.value[0];if(t&&((r=(l=i.value[t.row])==null?void 0:l[t.col])!=null&&r.isActive)){z(t);return}const s=i.value.flat().find(f=>f.isActive);if(s){$(s.row,s.col);const f=i.value[s.row][s.col];m.value=f.clueRefs.some(d=>d.direction==="across")?"across":"down",R(),B(s.row,s.col)}else C.value=null,u.value=null},R=()=>{var a;if(!C.value){u.value=null;return}const{row:e,col:t}=C.value,s=(a=i.value[e])==null?void 0:a[t];if(!s||!s.isActive){u.value=null;return}let o=s.clueRefs.find(l=>l.direction===m.value);if(o!=null&&o.clueObj)u.value=o.clueObj;else{const l=m.value==="across"?"down":"across",r=s.clueRefs.find(f=>f.direction===l);r!=null&&r.clueObj?(m.value=l,u.value=r.clueObj):u.value=null}},Z=(e,t)=>{var o;const s=(o=i.value[e])==null?void 0:o[t];if(!(!s||!s.isActive)){if(te(e,t)){const a=m.value==="across"?"down":"across";s.clueRefs.some(l=>l.direction===a)&&(m.value=a,R())}else{const a=s.clueRefs.some(r=>r.direction==="across"),l=s.clueRefs.some(r=>r.direction==="down");a&&l?s.clueRefs.some(r=>r.direction===m.value)||(m.value=a?"across":"down"):m.value=l?"down":"across",$(e,t)}B(e,t)}},$=(e,t)=>{var o;const s=(o=i.value[e])==null?void 0:o[t];s!=null&&s.isActive&&(s.isError&&(s.isError=!1),b.value==="error"&&!h.value.includes("Bulmaca yüklenirken sorunlar oluştu")&&M(!1),C.value={row:e,col:t},R())},B=async(e,t)=>{await re();const s=U.value[`${e}-${t}`];s&&(s.focus(),setTimeout(()=>s.select(),0))},q=(e,t)=>{(!te(e,t)||!u.value)&&$(e,t);const s=U.value[`${e}-${t}`];s&&setTimeout(()=>s.select(),0)},ee=(e,t,s)=>{var f;const o=(f=i.value[t])==null?void 0:f[s];if(!(o!=null&&o.isActive))return;const a=e.target,l=a.value.toUpperCase(),r=/^[A-ZÇĞİÖŞÜ]$/;if(l.length>0&&r.test(l.slice(-1))){const d=l.slice(-1);o.value!==d&&(o.value=d,o.isError&&(o.isError=!1),b.value==="error"&&!h.value.includes("Bulmaca yüklenirken sorunlar oluştu")&&M(!1)),V(t,s)}else l===""?o.value!==""&&(o.value="",o.isError&&(o.isError=!1)):a.value=o.value},L=(e,t,s)=>{var f;const o=e.key,a=(f=i.value[t])==null?void 0:f[s];if(!(a!=null&&a.isActive))return;let l=!1;const r=(d,E)=>{m.value=d,E(t,s),l=!0};if(o==="ArrowRight")r("across",V);else if(o==="ArrowLeft")r("across",k);else if(o==="ArrowUp")r("down",k);else if(o==="ArrowDown")r("down",V);else if(o==="Enter"||o===" "){e.preventDefault();const d=m.value==="across"?"down":"across";a.clueRefs.some(E=>E.direction===d)&&(m.value=d,R(),B(t,s)),l=!0}else o==="Backspace"?(l=!0,a.value?(a.value="",a.isError&&(a.isError=!1)):k(t,s)):o==="Delete"?(l=!0,a.value&&(a.value="",a.isError&&(a.isError=!1))):o==="Tab"?(l=!0,e.preventDefault(),c(e.shiftKey)):o.length===1&&!/^[a-zA-ZçÇğĞıİöÖşŞüÜ]$/.test(o)&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&(l=!0);l&&e.preventDefault()},V=(e,t)=>{var l,r;if(!u.value)return;const s=u.value;if(!s)return;let o=e,a=t;if(m.value==="across")if(t<s.col+s.length-1)a++;else return;else if(e<s.row+s.length-1)o++;else return;(r=(l=i.value[o])==null?void 0:l[a])!=null&&r.isActive&&($(o,a),B(o,a))},k=(e,t)=>{var l,r;if(!u.value)return;const s=u.value;if(!s)return;let o=e,a=t;if(m.value==="across")if(t>s.col)a--;else return;else if(e>s.row)o--;else return;(r=(l=i.value[o])==null?void 0:l[a])!=null&&r.isActive&&($(o,a),B(o,a))},c=(e=!1)=>{const t=[...N.value,...G.value].sort((l,r)=>l.number!==r.number?l.number-r.number:l.direction==="across"?-1:1);if(!t.length)return;let s=-1;u.value&&(s=t.findIndex(l=>l.number===u.value.number&&l.direction===u.value.direction&&l.row===u.value.row&&l.col===u.value.col));let o=e?(s-1+t.length)%t.length:(s+1)%t.length;const a=t[o];a&&z(a)},x=e=>u.value&&u.value.number===e.number&&u.value.direction===e.direction&&u.value.row===e.row&&u.value.col===e.col,z=e=>{var t,s;(s=(t=i.value[e.row])==null?void 0:t[e.col])!=null&&s.isActive&&(m.value=e.direction,$(e.row,e.col),B(e.row,e.col))},_=()=>{var a;if(!i.value.length){h.value="Kontrol edilecek bulmaca yok.",b.value="info";return}M(!1);let e=0,t=!1,s=!0,o=!0;i.value.flat().forEach(l=>{l.isActive&&(l.isError=!1,l.value||(s=!1))}),(((a=w.puzzleData)==null?void 0:a.clues)||[]).forEach(l=>{var d,E,K;if(typeof l.row!="number"||typeof l.col!="number"||l.length<=0||!l.solution)return;let r=!0,f=!1;for(let y=0;y<l.length;y++){const D=l.direction==="down"?l.row+y:l.row,j=l.direction==="across"?l.col+y:l.col,J=(d=i.value[D])==null?void 0:d[j];if(J!=null&&J.isActive)J.value?J.value.toUpperCase()!==l.solution[y].toUpperCase()&&(r=!1):(f=!0,r=!1);else{r=!1;break}}if(f&&(t=!0),!r&&!f){e++,o=!1;for(let y=0;y<l.length;y++){const D=l.direction==="down"?l.row+y:l.row,j=l.direction==="across"?l.col+y:l.col;(K=(E=i.value[D])==null?void 0:E[j])!=null&&K.isActive&&(i.value[D][j].isError=!0)}}else!r&&f&&(o=!1)}),s&&o&&e===0?(h.value="Tebrikler! Bulmacayı tamamen doğru çözdünüz!",b.value="success"):e>0?(h.value=`Bazı cevaplar hatalı (${e} kelime). Hatalı hücreler işaretlendi.`,b.value="error"):t?(h.value="Bulmaca henüz tamamlanmadı. Boş hücreler var.",b.value="info"):s&&!o?(h.value="Bazı cevaplar hatalı. Hatalı hücreler işaretlendi.",b.value="error"):(h.value="Kontrol tamamlandı. Lütfen işaretli hücreleri (varsa) gözden geçirin.",b.value="info")},A=()=>{var e;i.value.length&&(M(!0),(((e=w.puzzleData)==null?void 0:e.clues)||[]).forEach(t=>{var s,o;if(!(typeof t.row!="number"||typeof t.col!="number"||t.length<=0||!t.solution))for(let a=0;a<t.length;a++){const l=t.direction==="down"?t.row+a:t.row,r=t.direction==="across"?t.col+a:t.col;(o=(s=i.value[l])==null?void 0:s[r])!=null&&o.isActive&&(i.value[l][r].value=t.solution[a].toUpperCase(),i.value[l][r].isError=!1)}}),h.value="Tüm cevaplar gösterildi.",b.value="info")},le=()=>{i.value.length&&(M(!0),i.value.flat().forEach(e=>{e.isActive&&(e.value="",e.isError=!1)}),h.value="Girişler temizlendi.",b.value="info",P())},M=(e=!0)=>{h.value="",e&&i.value.flat().forEach(t=>{t.isError&&(t.isError=!1)})},te=(e,t)=>C.value&&C.value.row===e&&C.value.col===t,oe=(e,t)=>{if(!u.value||!C.value)return!1;const s=u.value;return s.direction==="across"?e===s.row&&t>=s.col&&t<s.col+s.length:t===s.col&&e>=s.row&&e<s.row+s.length};return ae(()=>{H()}),ne(()=>w.puzzleData,(e,t)=>{e&&JSON.stringify(e)!==JSON.stringify(t)&&H()},{deep:!0}),{gridData:i,currentCell:C,cellRefs:U,currentDirection:m,currentClue:u,statusMessage:h,statusType:b,cellSize:W,acrossClues:N,downClues:G,puzzleTitle:Y,initializeGrid:H,focusFirstClue:P,updateCurrentClue:R,handleCellClick:Z,selectCell:$,focusCell:B,handleFocus:q,handleInput:ee,handleKeyDown:L,moveToNextCell:V,moveToPreviousCell:k,moveToNextClueStart:c,isActiveClue:x,selectClueStart:z,checkPuzzle:_,revealPuzzle:A,clearPuzzle:le,clearStatus:M,isCurrentCell:te,isPartOfCurrentWord:oe,isLoading:O}}const me={class:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 font-sans bg-slate-100 min-h-screen"},he={class:"flex flex-col sm:flex-row items-center justify-between bg-gradient-to-r from-sky-500 to-indigo-600 text-white p-4 mb-6 rounded-xl shadow-lg"},be={class:"text-2xl sm:text-3xl font-bold mb-3 sm:mb-0"},pe={class:"flex items-center gap-2 sm:gap-3 flex-wrap justify-center"},ge={class:"flex flex-col lg:flex-row gap-6 lg:gap-8"},ye={class:"border-2 border-slate-300 inline-block mx-auto lg:mx-0 overflow-auto shadow-xl rounded-lg bg-slate-200"},we={key:0,class:"inline-block p-1.5"},xe=["onClick"],ke={key:0,class:"absolute top-0.5 left-0.5 text-[10px] sm:text-[11px] font-bold text-slate-500 select-none"},Ce=["onUpdate:modelValue","readonly","aria-label","onInput","onKeydown","onFocus","onClick"],ze={key:1,class:"text-center p-10 text-slate-500"},_e={class:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8"},Ae={class:"bg-slate-50 p-4 rounded-xl shadow-lg"},Ee={class:"space-y-1.5 max-h-[30rem] overflow-y-auto pr-2 text-sm sm:text-base"},De={key:0,class:"text-slate-500 italic py-2"},$e={key:1,class:"text-slate-500 italic py-2"},Be=["onClick"],Te={class:"font-bold mr-1.5"},Se={class:"text-slate-500 text-xs ml-1.5"},Re={class:"bg-slate-50 p-4 rounded-xl shadow-lg"},Oe={class:"space-y-1.5 max-h-[30rem] overflow-y-auto pr-2 text-sm sm:text-base"},Ke={key:0,class:"text-slate-500 italic py-2"},je={key:1,class:"text-slate-500 italic py-2"},Fe=["onClick"],Pe={class:"font-bold mr-1.5"},Le={class:"text-slate-500 text-xs ml-1.5"},Me={__name:"CrosswordComponent",props:{puzzleData:{type:Object,required:!0,default:()=>({width:10,height:10,clues:[],title:"Bulmaca Yükleniyor..."})}},setup(w){const i=w,{gridData:C,cellRefs:U,statusMessage:m,statusType:u,cellSize:h,acrossClues:b,downClues:W,puzzleTitle:O,handleCellClick:Y,handleFocus:N,handleInput:G,handleKeyDown:H,isActiveClue:P,selectClueStart:R,checkPuzzle:Z,revealPuzzle:$,clearPuzzle:B,isCurrentCell:q,isPartOfCurrentWord:ee,isLoading:L}=ve(i);return(V,k)=>(g(),p("div",me,[v("div",he,[v("h1",be,S(n(O)),1),v("div",pe,[v("button",{onClick:k[0]||(k[0]=(...c)=>n($)&&n($)(...c)),class:"px-4 py-2 bg-yellow-400 text-yellow-900 rounded-lg font-semibold hover:bg-yellow-300 transition-all shadow hover:shadow-md text-sm sm:text-base"}," Hepsini Göster "),v("button",{onClick:k[1]||(k[1]=(...c)=>n(B)&&n(B)(...c)),class:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 transition-all shadow hover:shadow-md text-sm sm:text-base"}," Temizle "),v("button",{onClick:k[2]||(k[2]=(...c)=>n(Z)&&n(Z)(...c)),class:"px-4 py-2 bg-sky-500 text-white rounded-lg font-semibold hover:bg-sky-600 transition-all shadow hover:shadow-md text-sm sm:text-base"}," Kontrol Et ")])]),n(m)?(g(),p("div",{key:0,class:Q(["p-3 mb-6 rounded-lg text-center font-medium shadow",n(u)==="success"?"bg-green-100 text-green-700 border border-green-300":n(u)==="error"?"bg-red-100 text-red-700 border border-red-300":"bg-blue-100 text-blue-700 border border-blue-300"]),role:"alert"},S(n(m)),3)):F("",!0),v("div",ge,[v("div",ye,[n(C).length?(g(),p("div",we,[(g(!0),p(X,null,I(n(C),(c,x)=>(g(),p("div",{key:"row-"+x,class:"flex"},[(g(!0),p(X,null,I(c,(z,_)=>(g(),p("div",{key:"cell-"+x+"-"+_,class:Q(["flex items-center justify-center border border-slate-400/80 relative",[z.isActive?"bg-white":"bg-slate-700 pointer-events-none",z.isError?"!bg-red-200 !text-red-800":"",n(q)(x,_)?"!bg-sky-200":"",n(ee)(x,_)&&!n(q)(x,_)?"!bg-sky-50":""]]),style:ie({width:n(h)+"px",height:n(h)+"px"}),onClick:A=>n(Y)(x,_)},[z.number?(g(),p("div",ke,S(z.number),1)):F("",!0),z.isActive?ue((g(),p("input",{key:1,type:"text","onUpdate:modelValue":A=>z.value=A,maxlength:"1",readonly:!z.isActive,"aria-label":`Satır ${x+1}, Sütun ${_+1}`,class:"w-full h-full text-center text-xl uppercase bg-transparent focus:outline-none font-medium appearance-none caret-sky-600",onInput:A=>n(G)(A,x,_),onKeydown:A=>n(H)(A,x,_),onFocus:A=>n(N)(x,_),onClick:fe(A=>n(Y)(x,_),["stop"]),ref_for:!0,ref:A=>{A&&(n(U)[`${x}-${_}`]=A)},autocomplete:"off",autocorrect:"off",autocapitalize:"characters",spellcheck:"false"},null,40,Ce)),[[ce,z.value]]):F("",!0)],14,xe))),128))]))),128))])):(g(),p("div",ze," Bulmaca yükleniyor veya veri yok... "))]),v("div",_e,[v("div",Ae,[k[3]||(k[3]=v("h3",{class:"text-xl font-bold mb-3 text-slate-800 border-b border-slate-300 pb-2"},"Soldan Sağa",-1)),v("div",Ee,[!n(b).length&&!n(L)?(g(),p("div",De,"İpucu bulunamadı.")):F("",!0),n(L)?(g(),p("div",$e,"İpuçları yükleniyor...")):F("",!0),(g(!0),p(X,null,I(n(b),c=>(g(),p("div",{key:"across-"+c.number+"-"+c.row+"-"+c.col,class:Q(["p-2.5 rounded-md cursor-pointer transition-all duration-150 hover:bg-sky-100",{"bg-sky-200 !text-sky-800 font-semibold shadow-sm":n(P)(c)}]),onClick:x=>n(R)(c)},[v("span",Te,S(c.number)+".",1),v("span",null,S(c.text),1),v("span",Se,"("+S(c.length)+")",1)],10,Be))),128))])]),v("div",Re,[k[4]||(k[4]=v("h3",{class:"text-xl font-bold mb-3 text-slate-800 border-b border-slate-300 pb-2"},"Yukarıdan Aşağıya ",-1)),v("div",Oe,[!n(W).length&&!n(L)?(g(),p("div",Ke,"İpucu bulunamadı. ")):F("",!0),n(L)?(g(),p("div",je,"İpuçları yükleniyor...")):F("",!0),(g(!0),p(X,null,I(n(W),c=>(g(),p("div",{key:"down-"+c.number+"-"+c.row+"-"+c.col,class:Q(["p-2.5 rounded-md cursor-pointer transition-all duration-150 hover:bg-sky-100",{"bg-sky-200 !text-sky-800 font-semibold shadow-sm":n(P)(c)}]),onClick:x=>n(R)(c)},[v("span",Pe,S(c.number)+".",1),v("span",null,S(c.text),1),v("span",Le,"("+S(c.length)+")",1)],10,Fe))),128))])])])])]))}},Ge=de(Me,[["__scopeId","data-v-45905f5e"]]);export{Ge as default};
