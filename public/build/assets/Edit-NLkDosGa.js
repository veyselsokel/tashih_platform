import{T as S,r as c,l as T,o as U,c as y,w as _,a as u,b as n,j as b,m,x,u as r,h as g,t as s,d as V,f as z,v as C}from"./app-A8zMFDdo.js";import{_ as D}from"./AuthenticatedLayout-DlYPJphZ.js";import F from"./FormattingToolbar-BgqS6_q0.js";import M from"./ImageUploader-COHIHRKc.js";import q from"./TagManager-Cmf9_0Rg.js";import B from"./SeoPanel-O7Wy2j71.js";import j from"./MarkdownPreview-DAW-YgZw.js";import"./ApplicationLogo-DI0bwGex.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AdvancedFormattingToolbar-DKvD5vAv.js";import"./createLucideIcon-DK8Lt3VK.js";import"./type-De0tG_Kj.js";import"./TextStyleControls-DE3e4Iab.js";import"./index-BMSQkwth.js";const A={class:"py-12"},E={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},N={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},H={class:"p-6"},O={class:"relative"},P={class:"flex items-center justify-between mb-2"},Y={key:0},G={class:"mt-2 flex space-x-4 text-sm text-gray-600"},I={class:"flex items-center"},J={class:"flex justify-end space-x-4"},K=["disabled"],ie={__name:"Edit",props:{post:{type:Object,required:!0},title:{type:String,required:!0}},setup(v){var f;const l=v,e=S({title:l.post.title,content:l.post.content,formatting:l.post.formatting||{font:"Arial, sans-serif",fontSize:"16px",lineHeight:"1.5",textAlign:"left",color:"#000000"},featured_image:null,current_featured_image:l.post.featured_image,featured_image_url:l.post.featured_image_url,meta_description:l.post.meta_description||"",tags:l.post.tags||[],is_published:l.post.is_published||!1,gallery:((f=l.post.gallery)==null?void 0:f.map(a=>({id:a.id,image:a.image,image_url:a.image_url,preview:a.image_url,caption:a.caption||"",alt_text:a.alt_text||"",order:a.order})))||[]}),i=c(!1);c(l.post.featured_image_url);const d=T(()=>{const a=e.content.trim().split(/\s+/).length,t=e.content.length,o=Math.ceil(a/200),p=e.content.split(`

`).length;return{wordCount:a,charCount:t,readingTime:o,paragraphs:p}}),h=a=>{const t=document.querySelector("#content-editor"),o=t.selectionStart,p=t.selectionEnd,k=e.content.substring(o,p),$=a(k);e.content=e.content.substring(0,o)+$+e.content.substring(p)},w=()=>{e._method="PUT";const a=new FormData;a.append("_method","PUT"),a.append("title",e.title),a.append("content",e.content),a.append("formatting",JSON.stringify(e.formatting)),a.append("meta_description",e.meta_description),a.append("tags",JSON.stringify(e.tags)),a.append("is_published",e.is_published?"1":"0"),l.post.featured_image&&a.append("current_featured_image",l.post.featured_image),e.featured_image instanceof File&&a.append("featured_image",e.featured_image),e.gallery&&e.gallery.length>0&&e.gallery.forEach((t,o)=>{t.id?(a.append(`gallery[${o}][id]`,t.id),a.append(`gallery[${o}][image]`,t.image),a.append(`gallery[${o}][caption]`,t.caption||""),a.append(`gallery[${o}][alt_text]`,t.alt_text||""),a.append(`gallery[${o}][order]`,o)):t.file instanceof File&&(a.append(`gallery[${o}][file]`,t.file),a.append(`gallery[${o}][caption]`,t.caption||""),a.append(`gallery[${o}][alt_text]`,t.alt_text||""),a.append(`gallery[${o}][order]`,o))}),e.post(route("blog.update",l.post.slug),{data:a,preserveScroll:!0,forceFormData:!0,onSuccess:()=>{}})};return U(()=>{var a;(a=l.post.gallery)!=null&&a.length&&(e.gallery=l.post.gallery.map(t=>({...t,preview:t.image_url,caption:t.caption||"",altText:t.alt_text||""})))}),(a,t)=>(u(),y(D,null,{header:_(()=>t[11]||(t[11]=[n("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Yazıyı Düzenle ",-1)])),default:_(()=>[n("div",A,[n("div",E,[n("div",N,[n("div",H,[n("form",{onSubmit:b(w,["prevent"]),class:"space-y-6"},[n("div",null,[t[12]||(t[12]=n("label",{class:"mb-2 block text-sm font-medium text-gray-700"}," Başlık ",-1)),m(n("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r(e).title=o),type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",required:""},null,512),[[x,r(e).title]])]),g(F,{modelValue:r(e).formatting,"onUpdate:modelValue":t[1]||(t[1]=o=>r(e).formatting=o),onFormatText:h,onClick:t[2]||(t[2]=b(()=>{},["prevent"]))},null,8,["modelValue"]),n("div",O,[n("div",P,[t[13]||(t[13]=n("label",{class:"text-sm font-medium text-gray-700"}," İçerik ",-1)),n("button",{type:"button",onClick:t[3]||(t[3]=o=>i.value=!i.value),class:"text-sm text-orange-500 hover:text-orange-600"},s(i.value?"Düzenleme Modu":"Önizleme"),1)]),i.value?(u(),y(j,{key:1,content:r(e).content,formatting:r(e).formatting},null,8,["content","formatting"])):(u(),V("div",Y,[m(n("textarea",{id:"content-editor","onUpdate:modelValue":t[4]||(t[4]=o=>r(e).content=o),rows:"10",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 whitespace-pre-wrap",style:z({fontFamily:r(e).formatting.font,fontSize:r(e).formatting.fontSize,textAlign:r(e).formatting.textAlign,color:r(e).formatting.color,lineHeight:r(e).formatting.lineHeight}),required:""},null,4),[[x,r(e).content]])])),n("div",G,[n("span",null,s(d.value.wordCount)+" kelime",1),n("span",null,s(d.value.readingTime)+" dk okuma süresi",1),n("span",null,s(d.value.paragraphs)+" paragraf",1),n("span",null,s(d.value.charCount)+" karakter",1)])]),g(M,{"featured-image":r(e).featured_image,"onUpdate:featuredImage":t[5]||(t[5]=o=>r(e).featured_image=o),gallery:r(e).gallery,"onUpdate:gallery":t[6]||(t[6]=o=>r(e).gallery=o),preview:r(e).featured_image_url,"initial-gallery":r(e).gallery},null,8,["featured-image","gallery","preview","initial-gallery"]),g(q,{modelValue:r(e).tags,"onUpdate:modelValue":t[7]||(t[7]=o=>r(e).tags=o)},null,8,["modelValue"]),g(B,{"meta-description":r(e).meta_description,"onUpdate:metaDescription":t[8]||(t[8]=o=>r(e).meta_description=o),title:r(e).title,content:r(e).content,tags:r(e).tags,"has-featured-image":!!r(e).current_featured_image||!!r(e).featured_image},null,8,["meta-description","title","content","tags","has-featured-image"]),n("div",I,[m(n("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>r(e).is_published=o),id:"is_published",class:"h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"},null,512),[[C,r(e).is_published]]),t[14]||(t[14]=n("label",{for:"is_published",class:"ml-2 block text-sm text-gray-700"}," Yayınla ",-1)),t[15]||(t[15]=n("span",{class:"ml-2 text-sm text-gray-500"}," (İşaretlemezseniz taslak olarak kaydedilecektir) ",-1))]),n("div",J,[n("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-orange-500",onClick:t[10]||(t[10]=o=>a.$inertia.visit(a.route("dashboard")))}," İptal "),n("button",{type:"submit",disabled:r(e).processing,class:"px-4 py-2 text-sm font-medium text-white bg-orange-500 border border-transparent rounded-md hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500"},s(r(e).is_published?"Güncelle ve Yayınla":"Güncelle"),9,K)])],32)])])])])]),_:1}))}};export{ie as default};
