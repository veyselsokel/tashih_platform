import{T as z,r as u,l as E,o as M,s as B,c as v,w as b,Q as $,a as m,b as r,j as y,m as p,x,u as o,h as c,t as l,d as k,f as A,y as F,v as I,k as K,z as w}from"./app-A8zMFDdo.js";import{_ as P}from"./AuthenticatedLayout-DlYPJphZ.js";import Y from"./FormattingToolbar-BgqS6_q0.js";import j from"./ImageUploader-COHIHRKc.js";import q from"./TagManager-Cmf9_0Rg.js";import N from"./SeoPanel-O7Wy2j71.js";import O from"./MarkdownPreview-DAW-YgZw.js";import{d as H}from"./TextStyleControls-DE3e4Iab.js";import{M as L}from"./index-BMSQkwth.js";import"./ApplicationLogo-DI0bwGex.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AdvancedFormattingToolbar-DKvD5vAv.js";import"./createLucideIcon-DK8Lt3VK.js";import"./type-De0tG_Kj.js";const Q={class:"py-12"},G={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},J={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},R={class:"p-6"},W={class:"relative"},X={class:"flex justify-between items-center mb-2"},Z={key:0},tt={class:"mt-2 flex space-x-4 text-sm text-gray-600"},et={class:"flex items-center"},ot={key:0,class:"text-sm text-gray-500"},nt={class:"flex justify-end space-x-4"},st=["disabled"],kt={__name:"Create",setup(rt){new L;const e=z({title:"",content:"",formatting:{...H},featured_image:null,meta_description:"",tags:[],is_published:!1,gallery:[]}),h=u(null),g=u(null),f=u(null),i=u(!1),d=E(()=>{const n=e.content.trim().split(/\s+/).length,t=e.content.length,s=Math.ceil(n/200),a=e.content.split(`

`).length;return{wordCount:n,charCount:t,readingTime:s,paragraphs:a}}),S=n=>{const t=document.querySelector("#content-editor"),s=t.selectionStart,a=t.selectionEnd,D=e.content.substring(s,a),U=n(D);e.content=e.content.substring(0,s)+U+e.content.substring(a)},_=n=>{if(n.shiftKey){n.preventDefault();const t=n.target.selectionStart,s=e.content.substring(0,t),a=e.content.substring(n.target.selectionEnd);e.content=s+`

`+a,w(()=>{n.target.selectionStart=n.target.selectionEnd=t+2})}else{n.preventDefault();const t=n.target.selectionStart,s=e.content.substring(0,t),a=e.content.substring(n.target.selectionEnd);e.content=s+`
`+a,w(()=>{n.target.selectionStart=n.target.selectionEnd=t+1})}},T=()=>{g.value=setInterval(()=>{e.isDirty&&V()},3e4)},V=async()=>{try{await e.post(route("blog.draft"),{preserveScroll:!0,onSuccess:()=>{var t;(t=$().props.flash)!=null&&t.success,f.value=new Date},onError:n=>{console.error("Otomatik kaydetme hatası:",n)}})}catch(n){console.error("Otomatik kaydetme hatası:",n)}},C=n=>{n.preventDefault(),!e.processing&&e.post(route("blog.store"),{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Form gönderme hatası:",t)}})};return M(()=>{T()}),B(()=>{g.value&&clearInterval(g.value)}),(n,t)=>(m(),v(P,null,{header:b(()=>t[11]||(t[11]=[r("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Yeni Blog Yazısı ",-1)])),default:b(()=>[r("div",Q,[r("div",G,[r("div",J,[r("div",R,[r("form",{onSubmit:y(C,["prevent"]),class:"space-y-6"},[r("div",null,[t[12]||(t[12]=r("label",{class:"mb-2 block text-sm font-medium text-gray-700"}," Başlık ",-1)),p(r("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).title=s),type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",required:""},null,512),[[x,o(e).title]])]),c(Y,{modelValue:o(e).formatting,"onUpdate:modelValue":t[1]||(t[1]=s=>o(e).formatting=s),onFormatText:S,onClick:t[2]||(t[2]=y(()=>{},["prevent"]))},null,8,["modelValue"]),r("div",W,[r("div",X,[t[13]||(t[13]=r("label",{class:"text-sm font-medium text-gray-700"}," İçerik ",-1)),r("button",{type:"button",onClick:t[3]||(t[3]=s=>i.value=!i.value),class:"text-sm text-orange-500 hover:text-orange-600"},l(i.value?"Düzenleme Modu":"Önizleme"),1)]),i.value?(m(),v(O,{key:1,content:o(e).content,formatting:o(e).formatting},null,8,["content","formatting"])):(m(),k("div",Z,[p(r("textarea",{id:"content-editor","onUpdate:modelValue":t[4]||(t[4]=s=>o(e).content=s),rows:"10",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",style:A({fontFamily:o(e).formatting.font,fontSize:o(e).formatting.fontSize,textAlign:o(e).formatting.textAlign,color:o(e).formatting.color,lineHeight:o(e).formatting.lineHeight}),onKeydown:F(_,["enter"]),required:""},null,36),[[x,o(e).content]])])),r("div",tt,[r("span",null,l(d.value.wordCount)+" kelime",1),r("span",null,l(d.value.readingTime)+" dk okuma süresi",1),r("span",null,l(d.value.paragraphs)+" paragraf",1),r("span",null,l(d.value.charCount)+" karakter",1)])]),c(j,{"featured-image":o(e).featured_image,"onUpdate:featuredImage":t[5]||(t[5]=s=>o(e).featured_image=s),gallery:o(e).gallery,"onUpdate:gallery":t[6]||(t[6]=s=>o(e).gallery=s),preview:h.value},null,8,["featured-image","gallery","preview"]),c(q,{modelValue:o(e).tags,"onUpdate:modelValue":t[7]||(t[7]=s=>o(e).tags=s)},null,8,["modelValue"]),c(N,{"meta-description":o(e).meta_description,"onUpdate:metaDescription":t[8]||(t[8]=s=>o(e).meta_description=s),title:o(e).title,content:o(e).content,tags:o(e).tags,"has-featured-image":!!o(e).featured_image},null,8,["meta-description","title","content","tags","has-featured-image"]),r("div",et,[p(r("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>o(e).is_published=s),id:"is_published",class:"h-4 w-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500"},null,512),[[I,o(e).is_published]]),t[14]||(t[14]=r("label",{for:"is_published",class:"ml-2 block text-sm text-gray-700"}," Yayınla ",-1)),t[15]||(t[15]=r("span",{class:"ml-2 text-sm text-gray-500"}," (İşaretlemezseniz taslak olarak kaydedilecektir) ",-1))]),f.value?(m(),k("div",ot," Son otomatik kayıt: "+l(new Date(f.value).toLocaleTimeString()),1)):K("",!0),r("div",nt,[r("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-orange-500",onClick:t[10]||(t[10]=s=>n.$inertia.visit(n.route("dashboard")))}," İptal "),r("button",{type:"submit",disabled:o(e).processing,class:"px-4 py-2 text-sm font-medium text-white bg-orange-500 border border-transparent rounded-md hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500"},l(o(e).is_published?"Yayınla":"Taslak Olarak Kaydet"),9,st)])],32)])])])])]),_:1}))}};export{kt as default};
